!function(a){a.fn.scrollbox=function(b){var c={linear:!1,startDelay:2,delay:3,step:5,speed:32,switchItems:1,direction:"vertical",distance:"auto",autoPlay:!0,onMouseOverPause:!0,paused:!1,queue:null,listElement:"ul",listItemElement:"li",infiniteLoop:!0,switchAmount:0,afterForward:null,afterBackward:null,triggerStackable:!1};return b=a.extend(c,b),b.scrollOffset="vertical"===b.direction?"scrollTop":"scrollLeft",b.queue&&(b.queue=a("#"+b.queue)),this.each(function(){var d,h,i,j,k,l,m,n,o,c=a(this),e=null,f=null,g=!1,p=0,q=0;b.onMouseOverPause&&(c.bind("mouseover",function(){g=!0}),c.bind("mouseout",function(){g=!1})),d=c.children(b.listElement+":first-child"),!1===b.infiniteLoop&&0===b.switchAmount&&(b.switchAmount=d.children().length),l=function(){if(!g){var i,k,l,m,n;if(i=d.children(b.listItemElement+":first-child"),m="auto"!==b.distance?b.distance:"vertical"===b.direction?i.outerHeight(!0):i.outerWidth(!0),b.linear?l=Math.min(c[0][b.scrollOffset]+b.step,m):(n=Math.max(3,parseInt(.3*(m-c[0][b.scrollOffset]),10)),l=Math.min(c[0][b.scrollOffset]+n,m)),c[0][b.scrollOffset]=l,l>=m){for(k=0;k<b.switchItems;k++)b.queue&&b.queue.find(b.listItemElement).length>0?(d.append(b.queue.find(b.listItemElement)[0]),d.children(b.listItemElement+":first-child").remove()):d.append(d.children(b.listItemElement+":first-child")),++p;if(c[0][b.scrollOffset]=0,clearInterval(e),e=null,a.isFunction(b.afterForward)&&b.afterForward.call(c,{switchCount:p,currentFirstChild:d.children(b.listItemElement+":first-child")}),b.triggerStackable&&0!==q)return void h();if(!1===b.infiniteLoop&&p>=b.switchAmount)return;b.autoPlay&&(f=setTimeout(j,1e3*b.delay))}}},m=function(){if(!g){var i,k,l,m,n;if(0===c[0][b.scrollOffset]){for(k=0;k<b.switchItems;k++)d.children(b.listItemElement+":last-child").insertBefore(d.children(b.listItemElement+":first-child"));i=d.children(b.listItemElement+":first-child"),m="auto"!==b.distance?b.distance:"vertical"===b.direction?i.height():i.width(),c[0][b.scrollOffset]=m}if(b.linear?l=Math.max(c[0][b.scrollOffset]-b.step,0):(n=Math.max(3,parseInt(.3*c[0][b.scrollOffset],10)),l=Math.max(c[0][b.scrollOffset]-n,0)),c[0][b.scrollOffset]=l,0===l){if(--p,clearInterval(e),e=null,a.isFunction(b.afterBackward)&&b.afterBackward.call(c,{switchCount:p,currentFirstChild:d.children(b.listItemElement+":first-child")}),b.triggerStackable&&0!==q)return void h();b.autoPlay&&(f=setTimeout(j,1e3*b.delay))}}},h=function(){0!==q&&(q>0?(q--,f=setTimeout(j,0)):(q++,f=setTimeout(i,0)))},j=function(){clearInterval(e),e=setInterval(l,b.speed)},i=function(){clearInterval(e),e=setInterval(m,b.speed)},n=function(){b.autoPlay=!0,g=!1,clearInterval(e),e=setInterval(l,b.speed)},o=function(){g=!0},k=function(a){b.delay=a||b.delay,clearTimeout(f),b.autoPlay&&(f=setTimeout(j,1e3*b.delay))},b.autoPlay&&(f=setTimeout(j,1e3*b.startDelay)),c.bind("resetClock",function(a){k(a)}),c.bind("forward",function(){b.triggerStackable?null!==e?q++:j():(clearTimeout(f),j())}),c.bind("backward",function(){b.triggerStackable?null!==e?q--:i():(clearTimeout(f),i())}),c.bind("pauseHover",function(){o()}),c.bind("forwardHover",function(){n()}),c.bind("speedUp",function(a){"undefined"===a&&(a=Math.max(1,parseInt(b.speed/2,10))),b.speed=a}),c.bind("speedDown",function(a){"undefined"===a&&(a=2*b.speed),b.speed=a}),c.bind("updateConfig",function(c){b=a.extend(b,c)})})}}(jQuery);